import{arrow as e,computePosition as t}from"@floating-ui/dom";export*from"@floating-ui/dom";import*as r from"react";import{useLayoutEffect as n,useEffect as o}from"react";import*as u from"react-dom";const c=t=>{const{element:r,padding:n}=t;return{name:"arrow",options:t,fn(t){return o=r,Object.prototype.hasOwnProperty.call(o,"current")?null!=r.current?e({element:r.current,padding:n}).fn(t):{}:r?e({element:r,padding:n}).fn(t):{};var o}}};var i="undefined"!=typeof document?n:o;function s(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;0!=n--;)if(!s(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;for(n=r;0!=n--;){const r=o[n];if(("_owner"!==r||!e.$$typeof)&&!s(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function f(e){void 0===e&&(e={});const{placement:n="bottom",strategy:o="absolute",middleware:c=[],whileElementsMounted:f,open:a}=e,[l,m]=r.useState({x:null,y:null,strategy:o,placement:n,middlewareData:{},isPositioned:!1}),[p,d]=r.useState(c);s(p,c)||d(c);const y=r.useRef(null),g=r.useRef(null),b=r.useRef(l),h=function(e){const t=r.useRef(e);return i((()=>{t.current=e})),t}(f),[w,P]=r.useState(null),[S,O]=r.useState(null),R=r.useCallback((e=>{y.current!==e&&(y.current=e,P(e))}),[]),j=r.useCallback((e=>{g.current!==e&&(g.current=e,O(e))}),[]),k=r.useCallback((()=>{y.current&&g.current&&t(y.current,g.current,{middleware:p,placement:n,strategy:o}).then((e=>{const t={...e,isPositioned:!0};M.current&&!s(b.current,t)&&(b.current=t,u.flushSync((()=>{m(t)})))}))}),[p,n,o]);i((()=>{!1===a&&b.current.isPositioned&&(b.current.isPositioned=!1,m((e=>({...e,isPositioned:!1}))))}),[a]);const M=r.useRef(!1);i((()=>(M.current=!0,()=>{M.current=!1})),[]),i((()=>{if(w&&S){if(h.current)return h.current(w,S,k);k()}}),[w,S,k,h]);const v=r.useMemo((()=>({reference:y,floating:g,setReference:R,setFloating:j})),[R,j]),x=r.useMemo((()=>({reference:w,floating:S})),[w,S]);return r.useMemo((()=>({...l,update:k,refs:v,elements:x,reference:R,floating:j})),[l,k,v,x,R,j])}export{c as arrow,f as useFloating};
